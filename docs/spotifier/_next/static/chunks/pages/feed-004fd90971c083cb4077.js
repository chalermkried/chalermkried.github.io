_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{gJZc:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),i=n("UJx2"),c=n("o0o1"),o=n.n(c);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=n("HaE+");var d=function(e,t){var n=Object(r.useState)(null),a=n[0],i=n[1];return Object(r.useEffect)((function(){if(e.current&&"function"===typeof IntersectionObserver){var n=new IntersectionObserver((function(e){i(e[0])}),t);return n.observe(e.current),function(){i(null),n.disconnect()}}return function(){}}),[e.current,t.threshold,t.root,t.rootMargin]),a},p=n("qoWs"),m=n("/Lg7");function b(e){let t;const n=new Set,r=(e,r)=>{const a="function"===typeof e?e(t):e;a!==t&&(t=r?a:Object.assign({},t,a),n.forEach(e=>e(t)))},a=()=>t,i={setState:r,getState:a,subscribe:(e,r,i)=>r||i?((e,r=a,i=Object.is)=>{let c=r(t);function o(){try{const n=r(t);i(c,n)||e(c=n)}catch(n){e(null,n)}}return n.add(o),()=>n.delete(o)})(e,r,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,a,i),i}const g="undefined"===typeof window?r.useEffect:r.useLayoutEffect;var h=function(e){const t="function"===typeof e?b(e):e,n=(e=t.getState,n=Object.is)=>{const[,a]=Object(r.useReducer)(e=>e+1,0),i=t.getState(),c=Object(r.useRef)(i),o=Object(r.useRef)(e),u=Object(r.useRef)(n),s=Object(r.useRef)(!1),l=Object(r.useRef)();let f;void 0===l.current&&(l.current=e(i));let d=!1;(c.current!==i||o.current!==e||u.current!==n||s.current)&&(f=e(i),d=!n(l.current,f)),g(()=>{d&&(l.current=f),c.current=i,o.current=e,u.current=n,s.current=!1});const p=Object(r.useRef)(i);return Object(r.useEffect)(()=>{const e=()=>{try{const e=t.getState(),n=o.current(e);u.current(l.current,n)||(c.current=e,l.current=n,a())}catch(e){s.current=!0,a()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n},[]),d?f:l.current};return Object.assign(n,t),n[Symbol.iterator]=function*(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4"),yield n,yield t},n}((function(e){return{search:void 0,setSearch:function(t){return e((function(){return{search:t}}))}}})),v=n("vOnD"),y=a.a.createElement,x=v.a.div.withConfig({displayName:"card__Div",componentId:"sc-2qf2xc-0"})(["background-color:var(--bg2);border:1px solid var(--bd);padding:12px 0;.block{padding:0 12px;font-size:14px;line-height:2;}.artist{&::first-letter{text-transform:uppercase;}}.name{font-size:24px;}.image{margin:16px 0;width:100%;min-height:300px;img{width:100%;}}"]);var O=function(e){var t=e.artists,n=e.image,a=e.type,i=e.date,c=e.name,o=e.tracks,u=(e.spotifyUri,Object(r.useMemo)((function(){return new Date(i).toDateString()}),[i]));return y(x,null,y("div",{className:"block"},y("div",{className:"artist"},y("b",null,a)," by ",y("b",null,function(e){return e.reduce((function(e,t){return e+"".concat(e?", ":"").concat(t.name)}),"")}(t))),y("h4",{className:"name"},c)),y("div",{className:"image"},y("img",{alt:c,src:n.url,loading:"lazy"})),y("div",{className:"block"},y("div",{className:"date"},u),y("div",{className:"tracks"},"Total tracks: ",y("b",null,o))))},w=a.a.createElement,j=v.a.section.withConfig({displayName:"feed-body__Section",componentId:"sc-1260bds-0"})(["max-width:",";margin:32px auto;h3{margin-bottom:16px;margin-left:12px;text-align:center;}.card-list{display:grid;grid-template-columns:1fr;grid-gap:12px;@media ","{grid-template-columns:1fr 1fr;grid-gap:24px 16px;}}.fetch-trigger{height:100vh;margin-top:-100vh;}.indicator{text-align:center;margin:32px 0;}"],m.a,m.d.tabletAndUp);var k=function(){var e=h((function(e){return e.search})),t=Object(r.useRef)([]),n=Object(r.useState)(!1),a=n[0],i=n[1],c=Object(r.useRef)(),u=Object(r.useRef)(1),s=Object(r.useRef)(!0),m=d(c,{threshold:.3});function b(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a&&s.current){n.next=2;break}return n.abrupt("return");case 2:if(i(!0),!e){n.next=9;break}return n.next=6,Object(p.c)({page:u.current,query:e});case 6:n.t0=n.sent,n.next=12;break;case 9:return n.next=11,Object(p.a)({page:u.current});case 11:n.t0=n.sent;case 12:(r=n.t0).albums.next||(s.current=!1),u.current+=1,t.current=[].concat(l(t.current),l(r.albums.items)),i(!1);case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.useEffect)((function(){u.current=1,s.current=!0,i(!1),t.current=[],b()}),[e]),Object(r.useEffect)((function(){(null===m||void 0===m?void 0:m.isIntersecting)&&u.current>1&&b()}),[null===m||void 0===m?void 0:m.isIntersecting]),w(j,null,w("h3",null,e?'Results: "'.concat(e,'"'):"New Releases"),w("div",{className:"card-list"},t.current.map((function(e){return w(O,{artists:e.artists,date:e.release_date,image:e.images[1],key:e.id,name:e.name,spotifyUri:e.uri,tracks:e.total_tracks,type:e.album_type})}))),w("div",{className:"fetch-trigger",ref:c}),a&&w("div",{className:"indicator"},"Fetching Data..."))},S=n("nOHt"),N=v.a.nav.withConfig({displayName:"style__Nav",componentId:"kawvvd-0"})(["background-color:var(--bg2);height:44px;border-bottom:1px solid var(--bd);position:sticky;top:0;@media ","{height:54px;}.container{position:relative;display:flex;align-items:center;justify-content:center;height:100%;max-width:",";margin:0 auto;padding:0 16px;}.left-block{position:absolute;left:0;right:0;text-align:center;cursor:pointer;@media ","{right:auto;}}.right-block{position:fixed;display:flex;align-items:center;justify-content:space-between;right:0;left:0;bottom:0;font-size:14px;height:44px;padding:0 8px;background-color:var(--bg2);@media ","{position:absolute;left:auto;height:auto;bottom:auto;padding:0;}}.log-out{margin-left:8px;}"],m.d.tabletAndUp,m.a,m.d.tabletAndUp,m.d.tabletAndUp),E=a.a.createElement,_=v.a.div.withConfig({displayName:"user-info__Div",componentId:"s7ytyq-0"})(["display:inline-flex;align-items:center;.avatar{border-radius:50%;width:32px;height:32px;overflow:hidden;flex-shrink:0;margin-right:8px;img{width:100%;}}.name{max-width:160px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"]);function I(e){var t=e.image,n=e.name;return E(_,null,E("div",{className:"avatar"},E("img",{src:t})),E("span",{className:"name"},n||"Loading..."))}I.defaultProps={image:void 0,name:void 0};var R=I;function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(r.useRef)(!1),a=Object(r.useRef)(),i=Object(r.useRef)(e),c=Object(r.useCallback)((function(){return n.current}),[]),o=Object(r.useCallback)((function(){n.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){n.current=!0,i.current()}),t)}),[t]),u=Object(r.useCallback)((function(){n.current=null,a.current&&clearTimeout(a.current)}),[]);return Object(r.useEffect)((function(){i.current=e}),[e]),Object(r.useEffect)((function(){return o(),u}),[t]),[c,u,o]}var U=a.a.createElement,D=v.a.div.withConfig({displayName:"search__Div",componentId:"ozbwv-0"})(["width:",";position:relative;z-index:1;display:flex;margin-right:auto;@media ","{width:auto;margin-right:0;}.input{display:none;&.force-open{display:inline-block;flex-grow:1;}@media ","{display:inline-block;}}.icon{display:inline-flex;border:0;background-color:transparent;width:32px;flex-shrink:0;&.search{margin-right:12px;}img{width:100%;}@media ","{display:none;}}"],(function(e){return e.isForceOpened?"100%":"auto"}),m.d.tabletAndUp,m.d.tabletAndUp,m.d.tabletAndUp);var T=function(){var e=h((function(e){return e.setSearch})),t=Object(r.useState)(),n=t[0],a=t[1],i=Object(r.useState)(!1),c=i[0],o=i[1],u=Object(r.useRef)();return function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=A(C(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),3),a=n[0],i=n[1],c=n[2];Object(r.useEffect)(c,t)}((function(){e(n)}),1e3,[n]),U(D,{isForceOpened:c},U("button",{className:"icon search",type:"button",onClick:function(){o(!0),requestAnimationFrame((function(){u.current.focus()}))}},U("img",{alt:"search",src:"/icons/search.svg"})),U("input",{className:"input".concat(c?" force-open":""),type:"text",placeholder:"Search for album...",onChange:function(e){a(e.target.value)},ref:u}),c&&U("button",{className:"icon close",type:"button",onClick:function(){u.current.value="",o(!1),a()}},U("img",{alt:"search",src:"/icons/x-circle.svg"})))},q=a.a.createElement;var z=function(){var e,t,n=Object(S.useRouter)(),a=Object(r.useState)("true"===localStorage.getItem(m.f))[0],i=Object(r.useState)({}),c=i[0],u=i[1];return Object(r.useEffect)((function(){function e(){return(e=Object(f.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a&&function(){e.apply(this,arguments)}()}),[a]),q(N,null,q("div",{className:"container"},q("h3",{className:"left-block",onClick:function(){return window.scroll(0,0)}},m.h),q(T,null),q("div",{className:"right-block"},a?q(R,{image:null===(e=c.images)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.url,name:c.display_name}):"Guest",q("a",{className:"log-out",href:"/",onClick:function(e){(null===e||void 0===e?void 0:e.preventDefault)&&e.preventDefault(),localStorage.removeItem(m.g),localStorage.removeItem(m.f),n.push("/")}},"Log Out"))))},F=n("GTwo"),J=a.a.createElement;t.default=function(){var e=Object(S.useRouter)(),t=Object(r.useState)(!1),n=t[0],c=t[1];return Object(r.useEffect)((function(){localStorage.getItem(m.g)?c(!0):e.push("/")}),[e]),J(a.a.Fragment,null,J(i.a,null),n?J(a.a.Fragment,null,J(z,null),J("main",null,J(k,null))):J(F.a,null))}},kfCY:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/feed",function(){return n("gJZc")}])}},[["kfCY",0,2,1,3]]]);